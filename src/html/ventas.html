<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Farmacia - Ventas</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../styles.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>
          <i class="fa-solid fa-hospital"></i> BadBreaking
          <i class="fa-solid fa-atom"></i>
        </h1>
        <p>
          Gesti√≥n Completa de Inventario, Ventas y Reportes con Oracle Database
        </p>
      </header>
      <div class="tabs">
        <a href="../dashboard.html" class="tab"
          ><i class="fa-solid fa-chart-pie"></i> Dashboard</a
        >
        <a href="medicamentos.html" class="tab"
          ><i class="fa-solid fa-pills"></i> Medicamentos</a
        >
        <a href="ventas.html" class="tab active"
          ><i class="fa-solid fa-cash-register"></i> Ventas</a
        >
        <a href="reportes.html" class="tab"
          ><i class="fa-solid fa-chart-line"></i> Reportes</a
        >
      </div>

      <div class="tab-content active">
        <div class="form-section">
          <h2><i class="fa-solid fa-cart-shopping"></i> Nueva Venta</h2>
          <form id="formVenta">
            <div
              class="form-section"
              style="
                margin-bottom: 20px;
                padding: 15px;
                border: 1px solid #b3e5fc;
                border-radius: 10px;
              "
            >
              <h3 style="color: #0277bd; margin-bottom: 15px">
                Datos del Cliente
              </h3>
              <div class="form-grid">
                <div class="form-group">
                  <label>DNI</label>
                  <input
                    type="text"
                    id="txtDniCliente"
                    required
                    maxlength="8"
                    placeholder="Ej. 12345678"
                    oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                  />
                </div>
                <div class="form-group">
                  <label>Nombre</label>
                  <input
                    type="text"
                    id="txtNombreCliente"
                    required
                    placeholder="Nombre"
                  />
                </div>
                <div class="form-group">
                  <label>Ap. Paterno</label>
                  <input
                    type="text"
                    id="txtApePaterno"
                    required
                    placeholder="Apellido P."
                  />
                </div>
                <div class="form-group">
                  <label>Ap. Materno</label>
                  <input
                    type="text"
                    id="txtApeMaterno"
                    placeholder="Apellido M."
                  />
                </div>
              </div>
            </div>

            <div class="form-grid">
              <div class="form-group">
                <label>Empleado (Vendedor)</label>
                <select id="selectEmpleado" required>
                  <option value="">Seleccione un empleado...</option>
                </select>
              </div>
            </div>

            <h3 style="color: #0277bd; margin: 20px 0">Detalles</h3>

            <div id="detallesVenta"></div>
            <button
              type="button"
              class="btn btn-secondary"
              onclick="agregarDetalle()"
            >
              <i class="fa-solid fa-plus"></i> Agregar
            </button>

            <h3 style="margin-top: 20px; color: #0277bd">
              Total: S/. <span id="totalVenta">0.00</span>
            </h3>

            <div class="btn-group" style="margin-top: 20px">
              <button
                type="button"
                class="btn btn-success"
                onclick="procesarVenta()"
              >
                <i class="fa-solid fa-check"></i> Procesar
              </button>
              <button
                type="button"
                class="btn btn-danger"
                onclick="limpiarFormularioVenta()"
              >
                <i class="fa-solid fa-trash"></i> Limpiar
              </button>
            </div>
          </form>
          <div id="resultadoVenta"></div>
        </div>

        <div class="form-section">
          <h2><i class="fa-solid fa-scroll"></i> Historial</h2>
          <div class="filter-bar" style="margin-bottom: 15px">
            <input
              type="text"
              id="txtBuscarVenta"
              placeholder="Buscar por Cliente, Empleado o ID..."
              onkeyup="filtrarVentas()"
              style="width: 100%; padding: 8px"
            />
          </div>
          <button class="btn" onclick="cargarVentas()">
            <i class="fa-solid fa-sync"></i> Actualizar
          </button>
          <div id="historialVentas"></div>
        </div>
      </div>
    </div>
    <div id="modalEditar" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Detalle Venta</h2>
          <span class="close" onclick="cerrarModal('modalEditar')"
            >&times;</span
          >
        </div>
        <div id="contenidoModalEditar"></div>
      </div>
    </div>
    <script type="module" src="../js/ventas.js"></script>
  </body>
</html>
